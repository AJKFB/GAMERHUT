<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <meta charset="UTF-8">
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø±Ù</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background-color: #1e1e2f;
      color: #fff;
      direction: rtl;
    }

    .toggle-btn {
      display: none;
      position: fixed;
      top: 15px;
      right: 15px;
      background-color: #4fc3f7;
      border: none;
      padding: 10px 15px;
      font-size: 20px;
      border-radius: 5px;
      z-index: 1001;
      cursor: pointer;
    }

    .sidebar {
      width: 250px;
      background-color: #111;
      height: 100vh;
      padding-top: 20px;
      position: fixed;
      right: 0;
      top: 0;
      transition: right 0.3s;
      z-index: 1000;
    }

    .sidebar h2 {
      text-align: center;
      margin-bottom: 30px;
      color: #4fc3f7;
    }

    .sidebar a {
      display: block;
      padding: 15px 20px;
      color: white;
      text-decoration: none;
      transition: 0.3s;
    }

    .sidebar a:hover {
      background-color: #333;
      padding-right: 30px;
    }

    .main-content {
      margin-right: 250px;
      padding: 40px;
      transition: margin 0.3s;
    }

    h1 {
      margin-bottom: 20px;
      color: #4fc3f7;
    }

    .card {
      background-color: #2a2a3d;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      margin-bottom: 20px;
    }

    /* âœ… ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù‡Ø§ØªÙ */
    @media (max-width: 768px) {
      .toggle-btn {
        display: block;
      }

      .sidebar {
        right: -250px;
      }

      .sidebar.active {
        right: 0;
      }

      .main-content {
        margin-right: 0;
        padding: 20px;
      }

      .main-content.blur {
        filter: blur(2px);
      }
    }

    h3 {
      margin-bottom: 20px;
      color: #ffffff;
    }




    .settings-section {
  display: flex;
  flex-direction: column;
  gap: 30px;
}

.card {
  background-color: #2a2a3d;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.card h3 {
  margin-bottom: 15px;
  color: #4fc3f7;
}

.card form input,
.card form select,
.card form textarea,
.card form button {
  width: 100%;
  max-width: 100%;
  margin-bottom: 10px;
  padding: 10px;
  border: none;
  border-radius: 8px;
  font-family: inherit;
}

.card form button {
  background-color: #4fc3f7;
  color: black;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.2s;
}

.card form button:hover {
  background-color: #38b6ff;
}

/* âš ï¸ ØªØ®ØµÙŠØµ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
.card table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}

.card table th,
.card table td {
  padding: 10px;
  text-align: center;
}

.card table th {
  background: #333;
  color: white;
}

.card table td {
  background: #2a2a3d;
  color: #ccc;
}

/* âœ… Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù‡Ø§ØªÙ */
@media (max-width: 768px) {
  .settings-section {
    padding: 10px;
  }

  .card {
    padding: 15px;
  }

  .card form input,
  .card form select,
  .card form textarea,
  .card form button {
    font-size: 14px;
  }

  .card table th,
  .card table td {
    font-size: 13px;
    padding: 8px;
  }
}
  </style>
</head>
<body>

  <!-- Ø²Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø¬ÙˆØ§Ù„ -->
  <button class="toggle-btn" onclick="toggleSidebar()">â˜°</button>

  <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
  <div class="sidebar" id="sidebar">
    <h2>ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
    <a href="#" onclick="showSection('section-home')">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="#" onclick="showSection('section-orders')">ğŸ“¦ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>
    <a href="#" onclick="showSection('section-keys')">ğŸ§¾ Ø±Ù…ÙˆØ² Ø§Ù„ØªÙØ¹ÙŠÙ„</a>
    <a href="#" onclick="showSection('section-users')">ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</a>
    <a href="#" onclick="showSection('section-stats')">ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</a>
    <a href="#" onclick="showSection('section-Settings')">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ø§Ù…Ø©</a>
    <a href="#" onclick="showSection('section-logout')">ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a>
  </div>

  <div class="main-content">
    <h1>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø£ÙŠÙ‡Ø§ Ø§Ù„Ù…Ø´Ø±Ù</h1>

    <!-- âœ… Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø¸Ø§Ù‡Ø± -->
    <div id="section-home" class="admin-section">
      <div class="card">
        <p>Ù‡Ø°Ù‡ Ù‡ÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø±Ù. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙ†Ù‚Ù„ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©.</p>
      </div>
    </div>

    <!-- âœ… Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø£Ø®Ø±Ù‰ Ù…Ø®ÙÙŠØ© -->
    <div id="section-orders" class="admin-section" style="display: none;">
  <h2>ğŸ“¦ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
  <table style="width:100%; border-collapse: collapse; margin-top: 20px;">
    <thead>
      <tr style="background-color: #333; color: #fff;">
        <th style="padding: 10px;">Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
        <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
        <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡</th>
        <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders %}
      <tr style="background:#2a2a3d; color:#eee; border-bottom:1px solid #444;">
        <td style="padding:10px;">{{ order.order_id }}</td>
        <td>{{ order.email }}</td>
        <td>
          {% if order.status == 'pending' %}
            â³ Ø¨Ø§Ù†ØªØ¸Ø§Ø±
          {% elif order.status == 'verified' %}
            âœ… ØªÙ… Ø§Ù„ØªØ£ÙƒÙŠØ¯
          {% elif order.status == 'rejected' %}
            âŒ Ù…Ø±ÙÙˆØ¶
          {% endif %}
        </td>
        <td>{{ order.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
        <td>
          {% if order.status == 'verified' %}
            âœ… ØªÙ… Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø©
          {% elif order.status == 'rejected' %}
            âŒ ØªÙ… Ø§Ù„Ø±ÙØ¶
          {% else %}
            â³ Ù„Ù… ÙŠØªÙ… Ø§ØªØ®Ø§Ø° Ø¥Ø¬Ø±Ø§Ø¡ Ø¨Ø¹Ø¯
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="section-keys" class="admin-section" style="display: none;">
  <h2>ğŸ§¾ Ø±Ù…ÙˆØ² Ø§Ù„ØªÙØ¹ÙŠÙ„</h2>

{% for product, keys in keys_by_product.items() %}
  <div class="card" style="margin-bottom: 30px;">
    <h3>ğŸ® {{ product }}</h3>
    <p>ğŸ“¦ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ØªÙˆÙØ±Ø©: {{ keys | selectattr('status', 'equalto', 'available') | list | length }} / {{ keys | length }}</p>
    <details>
      <summary style="cursor: pointer;">Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯</summary>
      <table style="width:100%; margin-top:10px; border-collapse:collapse;">
        <thead>
          <tr style="background:#333; color:#fff;">
            <th>Ø±Ù…Ø² Ø§Ù„ØªÙØ¹ÙŠÙ„</th>
            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
            <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©</th>
            <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
          </tr>
        </thead>
        <tbody>
          {% for code in keys %}
          <tr style="background:#2a2a3d; color:#eee;">
            <td style="padding:8px;">{{ code.key_code }}</td>
            <td style="color: {{ 'lightgreen' if code.status == 'available' else 'red' }};">
              {{ 'âœ… Ù…ØªÙˆÙØ±' if code.status == 'available' else 'âŒ ØªÙ… Ø¨ÙŠØ¹Ù‡' }}
            </td>
            <td>{{ code.created_at }}</td>
            <td>
              <!-- Ø²Ø± Ø§Ù„Ø­Ø°Ù -->
              <form method="POST" action="/delete_code" style="display:inline;">
                <input type="hidden" name="key_code" value="{{ code.key_code }}">
                <button type="submit" style="background:red;color:white;border:none;padding:4px 8px;border-radius:5px;">ğŸ—‘ï¸</button>
              </form>

              <!-- Ø²Ø± Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ -->
              <form method="POST" action="/edit_code" style="display:inline;">
                <input type="hidden" name="key_code" value="{{ code.key_code }}">
                <input type="text" name="new_product_name" placeholder="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø§Ø³Ù…" required style="padding:4px;border-radius:5px;width:120px;">
                <button type="submit" style="background:orange;color:white;border:none;padding:4px 8px;border-radius:5px;">âœï¸</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </details>
  </div>
{% endfor %}




<!-- ğŸ”˜ Ø²Ø± ÙØªØ­/Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ -->
<h3 style="margin-top: 30px;">
  <span onclick="toggleForm()" style="cursor:pointer; color:#fff;">
    <b style="font-size: 24px; color:#4fc3f7;">â•</b> Ø¥Ø¶Ø§ÙØ© Ø±Ù…Ø² ØªÙØ¹ÙŠÙ„ Ø¬Ø¯ÙŠØ¯
  </span>
</h3>

<!-- âœ… Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ù†ÙØ³Ù‡ -->
<div id="add-key-form" style="display: none;">
  <form method="POST" action="/add_code" style="background:#2a2a3d;padding:20px;border-radius:10px;width:100%;max-width:600px;">
    <label for="product_name">ğŸ•¹ï¸ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬:</label><br>
    <input type="text" name="product_name" required style="width:100%;padding:10px;border:none;border-radius:6px;margin-bottom:15px;"><br>

    <label for="key_code">ğŸ”‘ Ø±Ù…Ø² Ø§Ù„ØªÙØ¹ÙŠÙ„:</label><br>
    <textarea name="key_code" required style="width:100%;height:80px;padding:10px;border:none;border-radius:6px;margin-bottom:15px;"></textarea><br>

    <label for="status">âš™ï¸ Ø§Ù„Ø­Ø§Ù„Ø©:</label><br>
    <select name="status" style="width:100%;padding:10px;border-radius:6px;margin-bottom:15px;">
      <option value="available">âœ… Ù…ØªÙˆÙØ±</option>
      <option value="sold">âŒ ØªÙ… Ø¨ÙŠØ¹Ù‡</option>
    </select><br>

    <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©:</label><br>
    <input type="text" value="{{ now.strftime('%Y-%m-%d %H:%M') }}" disabled style="width:100%;padding:10px;border:none;border-radius:6px;background:#444;color:#ccc;"><br><br>

    <button type="submit" style="background:#4fc3f7;color:#000;padding:10px 20px;border:none;border-radius:8px;cursor:pointer;">ğŸ“¥ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ù…Ø²</button>
  </form>
</div>

<hr>

<!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù†Ù‚Ø± -->
<h3 style="margin-top: 30px; cursor: pointer;" onclick="toggleSendForm()">
  ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ ÙƒÙˆØ¯ ØªÙØ¹ÙŠÙ„ Ù„Ù„Ø¹Ù…ÙŠÙ„ <span id="arrow">â¬‡ï¸</span>
</h3>

<!-- Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¯Ø§Ø®Ù„ div Ù…Ø®ÙÙŠ -->
<div id="send-key-form" style="display: none;">
  <form method="POST" action="/send_key" style="background:#2a2a3d;padding:20px;border-radius:10px;width:100%;max-width:600px;">
    
    <label>ğŸ“§ Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¹Ù…ÙŠÙ„:</label>
    <input type="email" name="email" required style="width:100%;padding:10px;margin-bottom:15px;"><br>

    <label>ğŸ§¾ Ø±Ù…Ø² Ø§Ù„Ø·Ù„Ø¨:</label>
    <input type="text" name="order_id" required style="width:100%;padding:10px;margin-bottom:15px;"><br>

    <label>ğŸ•¹ï¸ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬:</label>
    <select name="product_name" id="product-select" required style="width:100%;padding:10px;margin-bottom:15px;">
      {% for product in keys_by_product.keys() %}
        <option value="{{ product }}">{{ product }}</option>
      {% endfor %}
    </select><br>

    <label>ğŸ”‘ Ø±Ù…Ø² Ø§Ù„ØªÙØ¹ÙŠÙ„:</label>
    <select name="activation_code" id="code-select" required style="width:100%;padding:10px;margin-bottom:15px;">
      <!-- ÙŠØªÙ… Ù…Ù„Ø¤Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¨Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª -->
    </select><br>

    <label>ğŸ“ Ù…Ø±ÙÙ‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
    <textarea name="note" placeholder="Ø±Ø§Ø¨Ø· Ø´Ø±Ø­ Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø§Øª" style="width:100%;height:80px;padding:10px;"></textarea><br>

    <button type="submit" style="background:#4fc3f7;color:#000;padding:10px 20px;border:none;border-radius:8px;cursor:pointer;">ğŸ“© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯</button>
  </form>
</div>

<!-- JavaScript -->
<script>
  function toggleSendForm() {
    const form = document.getElementById("send-key-form");
    const arrow = document.getElementById("arrow");
    const isHidden = form.style.display === "none";

    form.style.display = isHidden ? "block" : "none";
    arrow.textContent = isHidden ? "â¬†ï¸" : "â¬‡ï¸";
  }
</script>
</div>


<div id="section-users" class="admin-section" style="display: none;">
  <h2>ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†</h2>
  <table style="width:100%; border-collapse: collapse; margin-top: 20px;">
    <thead>
      <tr style="background-color: #333; color: #fff;">
        <th>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</th>
        <th>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</th>
        <th>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</th>
        <th>ØªÙ… Ø§Ù„ØªÙˆØ«ÙŠÙ‚</th>
        <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th>
        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
        <th>Ø¥Ø¬Ø±Ø§Ø¡</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr style="background:#2a2a3d; color:#eee; border-bottom:1px solid #444;">
        <td>{{ user.full_name }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.username or 'â€”' }}</td>
        <td>{{ 'âœ…' if user.is_verified else 'âŒ' }}</td>
        <td>
          {% if user.registered_at %}
            {{ user.registered_at.strftime('%Y-%m-%d %H:%M') }}
          {% else %}
            ØºÙŠØ± Ù…ØªÙˆÙØ±
          {% endif %}
        </td>
        <td>
          {% if user.is_banned %}
            ğŸš« Ù…Ø­Ø¸ÙˆØ±
          {% elif user.ban_until and user.ban_until > now %}
            â³ Ø­Ø¸Ø± Ù…Ø¤Ù‚Øª
          {% else %}
            âœ… Ù†Ø´Ø·
          {% endif %}
        </td>
        <td>
          {% if user.is_banned %}
            <form method="POST" action="/unban_user">
              <input type="hidden" name="user_id" value="{{ user.id }}">
              <button type="submit">ğŸ”“ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø¸Ø±</button>
            </form>
          {% else %}
            <form method="POST" action="/ban_user">
              <input type="hidden" name="user_id" value="{{ user.id }}">
              <select name="ban_duration">
                <option value="permanent">Ø¯Ø§Ø¦Ù…</option>
                <option value="7">7 Ø£ÙŠØ§Ù…</option>
                <option value="30">30 ÙŠÙˆÙ…Ù‹Ø§</option>
              </select>
              <button type="submit">ğŸš« Ø­Ø¸Ø±</button>
            </form>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="section-stats" class="admin-section" style="display: none;">
  <h2>ğŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
  <div class="stats-container">

    <div class="stat-card">
      <h3 onclick="toggleChart('dailyChart')">ğŸ“… Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
      <div id="dailyChart" style="display: none;">
        <canvas id="dailyVisitsCanvas"></canvas>
      </div>
    </div>

    <div class="stat-card">
      <h3 onclick="toggleChart('weeklyChart')">ğŸ“† Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</h3>
      <div id="weeklyChart" style="display: none;">
        <canvas id="weeklyVisitsCanvas"></canvas>
      </div>
    </div>

    <div class="stat-card">
      <h3 onclick="toggleChart('hourlyChartWrap')">â° Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± Ø­Ø³Ø¨ Ø§Ù„Ø³Ø§Ø¹Ø§Øª (Ø§Ù„ÙŠÙˆÙ…)</h3>
      <div id="hourlyChartWrap" style="display: none;">
        <canvas id="hourlyVisitsChart"></canvas>
      </div>
    </div>

    <div class="stat-card">
      <h3 onclick="toggleChart('monthlyChart')">ğŸ—“ï¸ Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ</h3>
      <div id="monthlyChart" style="display: none;">
        <canvas id="monthlyVisitsCanvas"></canvas>
      </div>
    </div>

    <div class="stat-card">
      <h3 onclick="toggleChart('topProductsChartWrap')">ğŸ”¥ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ø¨ÙŠØ¹Ù‹Ø§</h3>
      <div id="topProductsChartWrap" style="display: none;">
        <canvas id="topProductsChart"></canvas>
      </div>
    </div>

    <div class="stat-card">
      <h3 onclick="toggleChart('keysStatusChartWrap')">ğŸ”‘ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…ØªÙˆÙØ±Ø© Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©</h3>
      <div id="keysStatusChartWrap" style="display: none;">
        <canvas id="keysStatusChart"></canvas>
      </div>
    </div>

    <div class="stat-card">
      <h3 onclick="toggleChart('cartAdditionsChartWrap')">ğŸ›’ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø£ÙƒØ«Ø± Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</h3>
      <div id="cartAdditionsChartWrap" style="display: none;">
        <canvas id="cartAdditionsChart"></canvas>
      </div>
    </div>

    <div class="stat-card">
      <h3>ğŸ‘¥ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…ÙˆØ«Ù‚ÙŠÙ†</h3>
      <p style="font-size: 32px; text-align: center; margin-top: 20px; color: #4fc3f7;">
        {{ verified_users_count }}
      </p>
    </div>

  </div>
</div>




<div id="section-Settings" class="admin-section" style="display: none;">
  <h2>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¹Ø§Ù…Ø©</h2>

  <div class="settings-section">

    <!-- ğŸ”Œ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
    <div class="card">
      <h3>ğŸ”Œ Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
      <form method="POST" action="/toggle_site_status" onsubmit="return confirmAction();">
        <p>Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ:
          <span style="color: {{ 'lightgreen' if site_settings.site_enabled else 'red' }};">
            {{ 'âœ… Ù…ÙØ¹Ù„' if site_settings.site_enabled else 'âŒ Ù…ØªÙˆÙ‚Ù' }}
          </span>
        </p>

        <input type="hidden" name="new_status" id="new_status_input" value="{{ 'false' if site_settings.site_enabled else 'true' }}">

        {% if site_settings.site_enabled %}
        <label>ğŸ“‹ Ø§Ø®ØªØ± Ø³Ø¨Ø¨ Ø§Ù„Ø¥ØºÙ„Ø§Ù‚:</label>
        <select name="selected_reason" id="reason-select" onchange="toggleCustomReason()" required>
          <option value="maintenance">ğŸ› ï¸ ØµÙŠØ§Ù†Ø© Ø¯ÙˆØ±ÙŠØ©</option>
          <option value="weekend">ğŸ›Œ Ø¹Ø·Ù„Ø© Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</option>
          <option value="update">ğŸ”„ ØªØ­Ø¯ÙŠØ«Ø§Øª ØªÙ‚Ù†ÙŠØ©</option>
          <option value="security">ğŸ” ÙØ­Øµ Ø£Ù…Ù†ÙŠ</option>
          <option value="custom">âœï¸ Ø³Ø¨Ø¨ Ù…Ø®ØµØµ</option>
        </select>

        <div id="custom-reason-box" style="display:none;">
          <label>âœï¸ Ø§ÙƒØªØ¨ Ø³Ø¨Ø¨Ùƒ Ø§Ù„Ù…Ø®ØµØµ:</label>
          <textarea name="custom_reason" rows="3"></textarea>
        </div>
        {% endif %}

        <button type="submit">
          {{ 'â›”ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø¤Ù‚ØªÙ‹Ø§' if site_settings.site_enabled else 'âœ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹' }}
        </button>
      </form>
    </div>

    <!-- ğŸ’± Ø³Ø¹Ø± Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± -->
    <div class="card">
      <h3>ğŸ’± Ø³Ø¹Ø± Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø¯ÙŠÙ†Ø§Ø±</h3>
      <form method="POST" action="/admin/update_currency">
        <label>1 Ø¯ÙˆÙ„Ø§Ø± =</label>
        <input type="number" name="usd_to_dzd" value="{{ config.usd_to_dzd }}" required min="1" step="1">
        <span>Ø¯ÙŠÙ†Ø§Ø± Ø¬Ø²Ø§Ø¦Ø±ÙŠ</span>
        <button type="submit">ğŸ’¾ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¹Ø±</button>
      </form>
    </div>

<!-- ğŸ¯ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ -->
<div class="card">
  <h3>ğŸ¯ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</h3>
  <form method="POST" action="/admin/add_offer">
    <!-- ğŸ”‘ ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬ -->
    <label>ğŸ§© ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬:</label>
    <input type="text" name="product_code" placeholder="Ù…Ø«Ù„: GOW Ø£Ùˆ FIFA24" required>

    <!-- ğŸ“‰ Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… -->
    <label>ğŸ“‰ Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ… (%):</label>
    <input type="number" name="discount" min="1" max="100" required>

    <!-- ğŸ“£ Ù†Øµ ØªØ³ÙˆÙŠÙ‚ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) -->
    <label>ğŸ“£ Ù†Øµ ØªØ±ÙˆÙŠØ¬ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
    <input type="text" name="highlight_text" placeholder="Ù…Ø«Ø§Ù„: Ø¹Ø±Ø¶ Ø®Ø§Øµ Ù„ÙØªØ±Ø© Ù…Ø­Ø¯ÙˆØ¯Ø© ğŸ">

    <!-- ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ® -->
    <label>ğŸ“… ÙŠØ¨Ø¯Ø£ Ù…Ù†:</label>
    <input type="date" name="start_date" required>

    <label>ğŸ“… ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ:</label>
    <input type="date" name="end_date" required>

    <button type="submit">â• Ø¥Ø¶Ø§ÙØ© Ø¹Ø±Ø¶</button>
  </form>
</div>

<!-- ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§ØµØ© -->
<div class="card" style="margin-top: 30px;">
  <h4>ğŸ“‹ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§ØµØ© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</h4>
  <table border="1" style="width: 100%; text-align: center;">
    <thead>
      <tr>
        <th>ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬</th>
        <th>ğŸ“‰ Ø§Ù„Ø®ØµÙ…</th>
        <th>ğŸ“… Ù…Ù†</th>
        <th>ğŸ“… Ø¥Ù„Ù‰</th>
        <th>ğŸ“¢ ØªØ±ÙˆÙŠØ¬</th>
        <th>ğŸ”– Ø§Ù„Ù†ÙˆØ¹</th>
        <th>ğŸ—‘ï¸ Ø­Ø°Ù</th>
      </tr>
    </thead>
    <tbody>
      {% for offer in offers %}
        {% if offer.product %}
        <tr>
          <td>{{ offer.product.name }}</td>
          <td>{{ offer.discount }}%</td>
          <td>{{ offer.start_date.strftime('%Y-%m-%d') }}</td>
          <td>{{ offer.end_date.strftime('%Y-%m-%d') }}</td>
          <td>{{ offer.highlight_text or "â€”" }}</td>
          <td>Ø¹Ø±Ø¶ Ø®Ø§Øµ</td>
          <td>
            <form method="POST" action="/admin/delete_offer">
              <input type="hidden" name="offer_id" value="{{ offer.id }}">
              <button type="submit">ğŸ—‘ï¸</button>
            </form>
          </td>
        </tr>
        {% endif %}
      {% endfor %}
    </tbody>
  </table>
</div>



    <!-- ğŸŸï¸ ÙƒÙˆØ¨ÙˆÙ†Ø§Øª Ø§Ù„Ø®ØµÙ… -->
    <div class="card">
      <h3>ğŸŸï¸ ÙƒÙˆØ¨ÙˆÙ†Ø§Øª Ø§Ù„Ø®ØµÙ…</h3>
      <form method="POST" action="/admin/add_coupon">
        <label>ğŸ”– Ø±Ù…Ø² Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†:</label>
        <input name="code" placeholder="Ù…Ø«Ø§Ù„: SALE20" required>

        <label>ğŸ’² Ù‚ÙŠÙ…Ø© Ø§Ù„Ø®ØµÙ…:</label>
        <input name="discount_value" type="number" placeholder="Ù…Ø«Ø§Ù„: 20" required>

        <label>ğŸ“Œ Ù†ÙˆØ¹ Ø§Ù„Ø®ØµÙ…:</label>
        <select name="discount_type">
          <option value="percent">Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ© %</option>
          <option value="fixed">Ù…Ø¨Ù„Øº Ø«Ø§Ø¨Øª ğŸ’µ</option>
        </select>

        <label>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡:</label>
        <input name="expires_at" type="date">

        <label>ğŸ›’ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©:</label>
        <input name="restricted_products" placeholder='Ù…Ø«Ø§Ù„: ["GTA", "MC", "FIFA"]'>

        <button type="submit">â• Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¨ÙˆÙ†</button>
      </form>

<h4 style="margin-top: 20px;">ğŸ“‹ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø­Ø§Ù„ÙŠØ©:</h4>
<table>
  <tr>
    <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
    <th>Ø§Ù„Ø®ØµÙ…</th>
    <th>Ù…Ù†</th>
    <th>Ø¥Ù„Ù‰</th>
    <th>ğŸ—‘ï¸</th>
  </tr>
  {% for offer in offers %}
  <tr>
    <td>{{ offer.product_code }}</td>
    <td>{{ offer.discount }}%</td>
    <td>{{ offer.start_date }}</td>
    <td>{{ offer.end_date }}</td>
    <td>
      <form method="POST" action="/admin/delete_offer" onsubmit="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ø¹Ø±Ø¶ØŸ')">
        <input type="hidden" name="offer_id" value="{{ offer.id }}">
        <button type="submit">ğŸ—‘ï¸ Ø­Ø°Ù</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>


    <!-- â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø© -->
    <div class="card">
      <h3>ğŸ•¹ï¸ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ù„Ù„ÙˆØ§Ø¬Ù‡Ø©</h3>
      <form method="POST" action="/admin/add_home_product" enctype="multipart/form-data">
        <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬:</label>
        <input type="text" name="product_name" required>

        <label>ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬:</label>
        <input type="file" name="image_file" accept="image/*" required>

        <label>ÙˆØµÙ Ù…Ø®ØªØµØ±:</label>
        <input type="text" name="description" required>

        <label>Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±:</label>
        <input type="number" name="usd_price" required min="1">

        <button type="submit">â• Ø¥Ø¶Ø§ÙØ©</button>
      </form>
    </div>

    <!-- ğŸ› ï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
    <div class="card">
      <h3>ğŸ› ï¸ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>
      {% for product in products_list %}
      <form method="POST" action="/admin/update_product/{{ loop.index0 }}">
        <textarea name="product_html" rows="7">{{ product.strip() }}</textarea>
        <button type="submit">ğŸ’¾ Ø­ÙØ¸</button>
        <a href="/admin/delete_product/{{ loop.index0 }}">ğŸ—‘ï¸ Ø­Ø°Ù</a>
        <hr>
      </form>
      {% endfor %}
    </div>

    <!-- ğŸ“‚ ØªØ¹Ø¯ÙŠÙ„ JSON -->
    <div class="card">
      <h3>ğŸ“‚ ØªØ¹Ø¯ÙŠÙ„ Ù…Ù„Ù ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
      <form method="POST" action="/admin/edit_products_json">
        <textarea name="json_content" rows="10" style="font-family: monospace;">{{ products_json }}</textarea>
        <button type="submit">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
      </form>
    </div>

   <div class="card">
  <h3>ğŸ“¢ Ø¥Ø¶Ø§ÙØ© Ø¥Ø´Ø¹Ø§Ø± Ø¹Ø§Ù…</h3>
  <form method="POST" action="/admin/add_notice">
    <label>ğŸ“ Ù†Øµ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:</label>
    <textarea name="text" required></textarea>

    <label>ğŸ¨ Ø§Ù„Ù„ÙˆÙ† (Hex Ø£Ùˆ Ø§Ø³Ù…):</label>
    <input type="text" name="color" placeholder="#ff0000 Ø£Ùˆ red" required>

    <label>ğŸ”– Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:</label>
    <select name="type" required>
      <option value="info">Ù…Ø¹Ù„ÙˆÙ…Ø©</option>
      <option value="warning">ØªØ­Ø°ÙŠØ±</option>
      <option value="success">Ù†Ø¬Ø§Ø­</option>
      <option value="danger">Ø®Ø·ÙŠØ±</option>
    </select>

    <button type="submit">â• Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±</button>
  </form>
</div>
<div class="card" style="margin-top: 20px;">
  <h4>ğŸ—‚ï¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h4>
  <table border="1" style="width: 100%; text-align: center;">
    <tr>
      <th>Ø§Ù„Ù†Øµ</th>
      <th>Ø§Ù„Ù†ÙˆØ¹</th>
      <th>Ø§Ù„Ù„ÙˆÙ†</th>
      <th>Ù†Ø´Ø·ØŸ</th>
      <th>Ø­Ø°Ù</th>
    </tr>
    {% for notice in notices %}
    <tr>
      <td>{{ notice.text }}</td>
      <td>{{ notice.type }}</td>
      <td><span style="background-color: {{ notice.color }}; padding: 3px 10px;">{{ notice.color }}</span></td>
      <td>{{ "âœ…" if notice.is_active else "âŒ" }}</td>
      <td>
        <form method="POST" action="/admin/delete_notice">
          <input type="hidden" name="notice_id" value="{{ notice.id }}">
          <button type="submit">ğŸ—‘ï¸</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>
</div>


<script>
  function toggleCustomReason() {
    const select = document.getElementById("reason-select");
    const customBox = document.getElementById("custom-reason-box");
    customBox.style.display = select.value === "custom" ? "block" : "none";
  }

  function confirmAction() {
    const status = "{{ site_settings.site_enabled }}";
    if (status === "True" || status === "true") {
      return confirm("âš ï¸ Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŸ");
    }
    return true;
  }
</script>



<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>





<script>
// ğŸ“… Ø§Ù„Ø²ÙˆØ§Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠ
new Chart(document.getElementById('dailyVisitsCanvas'), {
  type: 'line',
  data: {
    labels: {{ daily_labels | tojson }},
    datasets: [{
      label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø±',
      data: {{ daily_counts | tojson }},
      borderColor: '#42a5f5',
      backgroundColor: 'rgba(66, 165, 245, 0.2)',
      fill: true,
      tension: 0.4,
      pointRadius: 0,
      borderWidth: 2
    }]
  },
  options: {
    responsive: true,
    scales: {
      x: {
        title: {
          display: true,
          text: 'Ø§Ù„ÙŠÙˆÙ…',
          color: '#fff'
        },
        ticks: {
          color: '#ccc'
        },
        grid: {
          color: '#333'
        }
      },
      y: {
        beginAtZero: true,
        ticks: {
          stepSize: 1,
          precision: 0,
          color: '#ccc'
        },
        title: {
          display: true,
          text: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø±',
          color: '#fff'
        },
        grid: {
          color: '#333'
        }
      }
    },
    plugins: {
      legend: { labels: { color: '#fff' } },
      tooltip: {
        backgroundColor: '#333',
        titleColor: '#fff',
        bodyColor: '#fff'
      }
    }
  }
});

new Chart(document.getElementById('weeklyVisitsCanvas'), {
  type: 'line',
  data: {
    labels: {{ weekly_labels|tojson }},
    datasets: [{
      label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø±',
      data: {{ weekly_counts|tojson }},
      borderColor: '#81c784',
      fill: false
    }]
  }
});

new Chart(document.getElementById('monthlyVisitsCanvas'), {
  type: 'line',
  data: {
    labels: {{ monthly_labels|tojson }},
    datasets: [{
      label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø±',
      data: {{ monthly_counts|tojson }},
      borderColor: '#ffb74d',
      fill: false
    }]
  }
});

new Chart(document.getElementById('topProductsChart'), {
  type: 'bar',
  data: {
    labels: {{ top_product_names|tojson }},
    datasets: [{
      label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª',
      data: {{ top_product_counts|tojson }},
      backgroundColor: ['#81c784', '#ffb74d', '#e57373', '#64b5f6', '#ba68c8']
    }]
  }
});

new Chart(document.getElementById('keysStatusChart'), {
  type: 'pie',
  data: {
    labels: ['Ù…ØªÙˆÙØ±Ø©', 'Ù…Ø¨Ø§Ø¹Ø©'],
    datasets: [{
      data: [{{ available_count }}, {{ sold_count }}],
      backgroundColor: ['#4fc3f7', '#ef5350']
    }]
  }
});

new Chart(document.getElementById('cartAdditionsChart'), {
  type: 'doughnut',
  data: {
    labels: {{ cart_product_names|tojson }},
    datasets: [{
      data: {{ cart_product_counts|tojson }},
      backgroundColor: ['#ffd54f', '#4db6ac', '#9575cd', '#ff8a65', '#90caf9']
    }]
  }
});
</script>



<script>
const hourlyCtx = document.getElementById('hourlyVisitsChart').getContext('2d');
const hourlyVisitsChart = new Chart(hourlyCtx, {
  type: 'line',
  data: {
    labels: {{ hourly_labels | tojson }},
    datasets: [{
      label: 'Ø¹Ø¯Ø¯ Ø§Ù„Ø²ÙˆØ§Ø± ÙÙŠ ÙƒÙ„ Ø³Ø§Ø¹Ø©',
      data: {{ hourly_counts | tojson }},
      backgroundColor: 'rgba(33, 150, 243, 0.2)',
      borderColor: 'rgba(33, 150, 243, 1)',
      borderWidth: 2,
      pointRadius: 3,
      tension: 0.3,
      fill: true
    }]
  },
  options: {
    responsive: true,
    scales: {
      y: {
        beginAtZero: true,
        ticks: {
          stepSize: 1
        }
      }
    },
    plugins: {
      legend: {
        labels: { color: 'white' }
      }
    }
  }
});
</script>





<script>
  const allKeys = JSON.parse('{{ keys_by_product | tojson | safe }}');
  const productSelect = document.getElementById("product-select");
  const codeSelect = document.getElementById("code-select");

  function updateCodes() {
    const selectedProduct = productSelect.value;
    const keys = allKeys[selectedProduct] || [];

    codeSelect.innerHTML = "";

    keys.forEach(key => {
      if (key.status === "available") {
        const option = document.createElement("option");
        option.value = key.key_code;
        option.textContent = key.key_code;
        codeSelect.appendChild(option);
      }
    });

    if (codeSelect.options.length === 0) {
      const option = document.createElement("option");
      option.textContent = "âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ù…ÙˆØ² Ù…ØªÙˆÙØ±Ø©";
      option.disabled = true;
      codeSelect.appendChild(option);
    }
  }

  productSelect.addEventListener("change", updateCodes);
  updateCodes();
</script>





 <script>
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const main = document.getElementById('main');
      sidebar.classList.toggle('active');
      main.classList.toggle('blur');
    }
  </script>




<script>

  function toggleChart(id) {
    const container = document.getElementById(id);
    const isHidden = container.style.display === 'none';

    // âœ… Ø£Ø¸Ù‡Ø± Ø£Ùˆ Ø£Ø®ÙÙ Ø§Ù„Ù‚Ø³Ù…
    container.style.display = isHidden ? 'block' : 'none';

    // âœ… Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¸Ù‡Ø§Ø±ØŒ Ø£Ø¹Ø¯ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø¥Ù† ÙˆÙØ¬Ø¯
    if (isHidden) {
      setTimeout(() => {
        const canvas = container.querySelector('canvas');
        if (canvas) {
          const chart = Chart.getChart(canvas);  // ÙŠØ­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø¨ÙŠØ§Ù†ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ
          if (chart) {
            chart.resize();  // ÙŠØ¹ÙŠØ¯ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø­Ø¬Ù…
          } else {
            // ÙÙŠ Ø­Ø§Ù„ Ù„Ù… ÙŠØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø±Ø³Ù… Ù…Ù† Ù‚Ø¨Ù„ (Ø§Ø­ØªÙŠØ§Ø·ÙŠÙ‹Ø§ ÙÙ‚Ø·)
            console.warn("âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø±Ø³Ù… Ø¨ÙŠØ§Ù†ÙŠ Ù…Ø¹Ø±Ù Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ±:", canvas.id);
          }
        }
      }, 150); // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ø¶Ù…Ø§Ù† Ø£Ù† Ø§Ù„Ø¹Ù†ØµØ± Ø£ØµØ¨Ø­ Ø¸Ø§Ù‡Ø±Ù‹Ø§
    }
  }



 



  
    function showSection(id) {
      document.querySelectorAll('.admin-section').forEach(sec => sec.style.display = 'none');
      const target = document.getElementById(id);
      if (target) target.style.display = 'block';
    }

    // âœ… Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§ Ø£Ø¸Ù‡Ø± "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" ÙÙ‚Ø·
    document.addEventListener("DOMContentLoaded", () => {
      showSection('section-home');
    });

    <!-- âœ… Ø³ÙƒØ±Ø¨Øª Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ -->
function toggleForm() {
    const form = document.getElementById('add-key-form');
    form.style.display = (form.style.display === 'none') ? 'block' : 'none';
  }




</script>


v>
  </div>
</body>
</html>
